#summary This document how to build the Gaixie Micrite project
#labels Featured,Phase-Implementation
<wiki:toc max_depth="2" />
= Introduction =
This document how to build the Gaixie Micrite project.

This guide is intended to cover how to build the latest svn/trunk,though other newer branches/tags should also follow similar instructions. <br>
Micrite trees that use the same basic build tooling include:

  * [http://code.google.com/p/micrite/source/browse/#svn/trunk svn/trunk]
  * [http://code.google.com/p/micrite/source/browse/#svn/tags svn/tags/0.x]

= Prerequisites =
== Java Developer Kit (JDK) ==

You will need a [http://java.sun.com/j2se/1.5.0/ JDK 5.0+ (J2SE 1.5.0+)] or compatible JDK to build Micrite. <br>
It is recommended you use SUN's implementation, or something compatible like Apples implementation. <br>
Other JDK vendors implementations may work, but use at your own risk.

== Apache Maven 2 ==

To execute the build process you need to have [http://maven.apache.org/download.html Apache Maven version 2.0.9] (or newer) installed.<br>
To check if your installation is working and you have the required minimum version run:

{{{
mvn -version
}}}

And it should produce something like:

{{{
Maven version: 2.0.9
}}}

If you have an incompatible version the project build will probably fail with a message complaining 

== Subversion ==

To fetch the source code for the server, you will need to have a Subversion client version 1.2 (or newer, 1.4 is recommended) installed.
{{{
Windows Tip

Windows users are strongly encouraged to change the M2 local repository (the place where dependencies are downloaded) to a shorter path with no spaces, e.g. C:\.m2.
Using a longer path may cause the build to behave very strangely when it hits the 260 char limit for filenames on Windows.
In order to change the m2 local repository go to %USERPROFILE%\.m2 and edit or create settings.xml file to contain the following content:
--------------------------------------------------------
<?xml version="1.0"?>
<settings>
    <localRepository>C:\.m2</localRepository>
</settings>
}}}

= Checkout Micrite =

{{{
svn checkout http://micrite.googlecode.com/svn/trunk/ micrite-read-only
}}}
See http://code.google.com/p/micrite/source/checkout for more detail.

= Preparing to Build for the First Time =

Chances are you will need to increase the heap size for Maven. See http://maven.apache.org/download.html for more detail.

= Building =

To build all changes incrementally, from project root directory run:
{{{
mvn install
}}}
The first time, this will lead to "table does not exist" error messages but they can be (and are) ignored. 

To perform clean builds, which are sometimes needed after some changes to the source tree:
{{{
mvn clean install
}}}

= Testing the Assembly =

Once you have build micrite fully, which will produce a war archive from the assemblies modules, 

you can use jetty-maven-plugin to run it. From the assemblies directory run:
{{{
mvn jetty:run
}}}
And to stop, just CTRL-C.

By default, Micrite use embedded Java database from the [http://db.apache.org/derby/ Apache Derby project], you can easily switch to another open source database such as MySQL, PostgreSQL. See [InstallGuide] for more detail.